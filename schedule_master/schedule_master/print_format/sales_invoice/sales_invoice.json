{
 "align_labels_right": 0,
 "creation": "2020-04-23 17:38:19.834667",
 "css": "",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 1,
 "doc_type": "Sales Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "html": "<style type=\"text/css\">\n\t.print-format table, .print-format tr, \n\t.print-format td, .print-format div, .print-format p {\n\t\tfont-family: 'Arial' ,monospace;\n\t\tline-height: 100%;\n\t\tvertical-align: middle;\n\t\tfont-size: 11px;\n\t}\n\t@media screen {\n\t\t.print-format {\n\t\t\tpadding: 0.25in;\n\t\t\tmax-height: 20in;\n\t\t}\n\t}\n</style>\n<p align=left><img style=\"width:150px;height:100px;\" src=\"/files/logo16d09e.png\" style=\"margin:5px;\" class=\"img-responsive\"></p>\n<br>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n         <th colspan = \"2\"; height=\"20\">\n         <center><font size=\"3\"><strong>Sales Invoice</strong></font></center>\n         </th>\n      </tr>\n\t<tr>\n         <td style=\"width: 30%;\"><b>Invoice No : {{ doc.name }}</b></td>\n         <td style=\"width: 30%;\"><b>Date : {{ doc.get_formatted('posting_date') }}</b></td>\n      </tr>\n\t<tr width=\"100%\">\n         {%  set billing = frappe.get_doc(\"Address\", \"Shreelight Power Pvt.Ltd.-Shipping\") %}\n         <td style=\"width: 40%;\">\n            <p style=\"font-size:140%;\"><strong>{{ doc.company }} </strong></p>\n            \n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email : </b>{{ billing.email_id }}</p>\n           </td>\n\t{% if doc.customer_address %}\n         {%  set billing = frappe.get_doc(\"Address\", doc.customer_address) %}\n         {% endif %}\n\t{% if doc.contact_person %}\n         {%  set contact = frappe.get_doc(\"Contact\", doc.contact_person) %}\n         <td style=\"width: 40%;\">\n            <p style=\"font-size:120%;\">Buyer</p>\n            <p style=\"font-size:140%;\">{{ doc.customer or doc.customer_name }}</p>\n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Contact Person : </b>{{ doc.contact_display or \"\" }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email Id : </b>{{ contact.email_id or \"\" }}</p></td>\n\t{% else %}\n\t\t <td style=\"width: 40%;\">\n            <p style=\"font-size:120%;\">Buyer</p>\n            <p style=\"font-size:140%;\">{{ doc.customer or doc.customer_name }}</p>\n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Contact Person : </b>{{ doc.contact_display or \"\" }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email Id : </b></p></td>\n\t{% endif %}\n\t</tr>\n\t<tr width=\"100%\">\n        <td>\n\t \t\t<p>Delivery Note : {{ doc.delivery_order_no or \"\"}}</p>\n\t\t\t<p>Buyer Order No : {{ doc.po_no or \"\" }}</p>\n\t\t\t<p>Supplier Ref No : </p>\n\t\t\t<p>Dispatch Document No : </p>\n\t</td>\n\t{% if doc.delivery_order_no %}\n        {%  set delivery = frappe.get_doc(\"Delivery Note\", doc.delivery_order_no) %}\n\t <td>\n\t \t\t<p>Delivery Date :  {{ delivery.get_formatted('posting_date') or \"\" }}</p>\n\t\t\t<p>Date : {{ doc.get_formatted('po_date') or \"\" }}</p>\n\t\t\t<p>Destination : </p>\n\t\t\t<p>Dispatch Through : </p>\n\t</td>\n\t{% else %}\n\t<td>\n\t \t\t<p>Delivery Date : </p>\n\t\t\t<p>Date : {{ doc.get_formatted('po_date') or \"\" }}</p>\n\t\t\t<p>Destination : </p>\n\t\t\t<p>Dispatch Through : </p>\n\t</td>\n\t{% endif %}\n\t</tr>\n</table>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n\t\t<th><font size = \"1\">Sr</font></th>\n\t\t<th><font size = \"1\">Particulars</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Qty</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Rate</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">GST Rate %</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Disc</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Amount</font></th>\n\t</tr>\n\t{% set cgst_rate = [] -%}\n\t{% set sgst_rate = [] -%}\n\t{% set igst_rate = [] -%}\n\t{% set cgst_account_head = [] -%}\n\t{% set sgst_account_head = [] -%}\n\t{% set igst_account_head = [] -%}\n\t{% set tot_cgst_amount = [] %}\n\t{% set tot_sgst_amount = [] %}\n\t{% set grand_total = {\"qty\":0.0, \"amount\":0.0, \"cgst_amt\":0.0, \"sgst_amt\":0.0, \"igst_amt\":0.0} %}\n\n\t{%- for row in doc.taxes -%}\n\t{% if 'CGST' in row.account_head -%}\n\t\t{% set _ = cgst_account_head.append(row.account_head) %}\n\t\t{% set _ = cgst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{% if 'SGST' in row.account_head -%}\n\t\t{% set _ = sgst_account_head.append(row.account_head) %}\n\t\t{% set _ = sgst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{% if 'IGST' in row.account_head -%}\n\t\t{% set _ = igst_account_head.append(row.account_head) %}\n\t\t{% set _ = igst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{%- endfor -%}\n\n\t{%- for row in doc.items -%}\n\t\t<tr width=\"100%\">\n\t\t        {% set cgst_amt = [] -%}\n\t\t \t {% set sgst_amt = [] -%}\n\t\t\t {% set igst_amt = [] -%}\n\t\t\t {% set it_cgst_rate = [] -%}\n\t\t \t {% set it_sgst_rate = [] -%}\n\t\t\t {% set it_igst_rate = [] -%}\n\t\t\t {% set rate_found_item = 0 -%}\n\n\t\t\t\t\t\t\t\t\n\t\t      {%- set item_record = frappe.get_doc(\"Item\", row.item_code) -%}\n\t\t\t{% for item_tax in item_record.taxes %}\n\n  \t\t\t  {% if item_tax.tax_type == igst_account_head[0] %}\n\t\t\t\t\n\t\t\t\t{% set _ = it_igst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = igst_amt.append(row.amount * it_igst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\t\n\t\t\t{% if item_tax.tax_type == sgst_account_head[0] %}\n\t\t\t\t\n\t\t\t\t{% set _ = it_sgst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = sgst_amt.append(row.amount * it_sgst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\n\t\t\t{% if item_tax.tax_type == cgst_account_head[0] %}\n\t\t\t\t{% set _ = it_cgst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = cgst_amt.append(row.amount * it_cgst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\t\n\n\n\t\t{% endfor %}\t\n\t  \t{% if rate_found_item == 0 %}\n\n\t\t\t{% if cgst_rate[0] -%}\n\t\t\t   {% set _ = cgst_amt.append((row.amount * cgst_rate[0])/100) -%}\n\t\t\t   {% set _= it_cgst_rate.append(cgst_rate[0]) -%}\n\t\t\t   {% set rate_found_inv = 1 -%}\n\t\t       \t{%- endif -%}\n\t\t\t{% if sgst_rate[0] -%}\n\t\t\t   {% set _ = sgst_amt.append((row.amount * sgst_rate[0])/100) -%}\n\t\t\t   {% set _= it_sgst_rate.append(sgst_rate[0]) -%}\n\t\t\t   \n\t\t       \t{%- endif -%}\n\t\t\t{% if igst_rate[0] -%}\n\t\t\t   {% set _ = igst_amt.append((row.amount * igst_rate[0])/100) -%}\n\t\t\t   {% set _= it_igst_rate.append(igst_rate[0]) -%}\n\t\t\t   {% set rate_found_inv = 1 -%}\n\t\t       \t{%- endif -%}\n\t\t{% endif %}\n\t\n\t\n\t\t{% if not it_cgst_rate[0] %}\n\t\t\t{% set _ = it_cgst_rate.append(0) %}\n\t\t\t{% set _ = cgst_amt.append(0) %}\n\t\t{% endif %}\n\t\t{% if not it_sgst_rate[0] %}\n\t\t\t{% set _ = it_sgst_rate.append(0) %}\n\t\t\t{% set _ = sgst_amt.append(0) %}\n\t\t{% endif %}\n\t\t{% if not it_igst_rate[0] %}\n\t\t\t{% set _ = it_igst_rate.append(0) %}\n\t\t\t{% set _ = igst_amt.append(0) %}\n\t\t{% endif %}\n\n\t\t{% set temp_cgst_amt = grand_total[\"cgst_amt\"] + cgst_amt[0] %}\n\t\t{% set temp_sgst_amt = grand_total[\"sgst_amt\"] + sgst_amt[0] %}\n\t\t{% set temp_igst_amt = grand_total[\"igst_amt\"] + igst_amt[0] %}\n\t\t{% set temp_qty = grand_total[\"qty\"] + row.qty %}\n\t\t{% set temp_amount = grand_total[\"amount\"] + row.amount %}\n\t\t{% set check = grand_total.update({\"qty\": temp_qty, \"amount\": temp_amount, \"cgst_amt\":temp_cgst_amt, \"sgst_amt\":temp_sgst_amt, \"igst_amt\":temp_igst_amt}) %}\n\t\t{% if row.idx < 9 -%}\n\t\t<td style=\"width: 3%;\"><font size = \"1\">{{ row.idx }}</font></td>\n\t\t<td style=\"width: 50%;\"><font size = \"1\"><b>Item Code : </b>{{ row.item_code }}&nbsp;&nbsp;<b>HSN Code : <b>{{ row.gst_hsn_code or '' }}<br><b>Item name : </b>{{ row.item_name }}</font></td>\n\t\t<td style=\"width: 7%; text-align: right;\"><font size = \"1\">{{ row.qty }} {{ row.uom or row.stock_uom }}</font></td>\n\t\t<td style=\"width: 10%; text-align: right;\"><font size = \"1\">{{row.get_formatted(\"price_list_rate\", doc) }}</font></td>\t\t\t\n\t\t<td style=\"width: 7%; text-align: right;\">{{ (it_cgst_rate[0] +it_sgst_rate[0]) or it_igst_rate[0]}}%</td>\n\t\t<td style=\"width: 9%; text-align: right;\"><font size = \"1\">{{ row.get_formatted(\"discount_percentage\", doc) }}</font></td>\n\t\t<td style=\"width: 14%; text-align: right;\"><font size = \"1\">{{row.get_formatted(\"amount\", doc) }}</font></td>\n</tr>\n\t{% endif %}\n   {% endfor %}\n</table>\n{% if doc.items|length >= 9 -%}\t\n<div class = \"page-break\"></div>\n<p align=left><img style=\"width:150px;height:100px;\" src=\"/files/hexa.png\" style=\"margin:5px;\" class=\"img-responsive\"></p>\n<br>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n         <th colspan = \"2\"; height=\"20\">\n         <center><font size=\"3\"><strong>Sales Invoice</strong></font></center>\n         </th>\n      </tr>\n\t<tr>\n         <td style=\"width: 30%;\"><b>Invoice No : {{ doc.name }}</b></td>\n         <td style=\"width: 30%;\"><b>Date : {{ doc.get_formatted('posting_date') }}</b></td>\n      </tr>\n\t<tr width=\"100%\">\n         {%  set billing = frappe.get_doc(\"Address\", \"Head Office-Billing\") %}\n         <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:140%;\"><strong>{{ doc.company }} </strong></p>\n            \n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email : </b>{{ billing.email_id }}</p>\n           </td>\n\t{% if doc.customer_address %}\n         {%  set billing = frappe.get_doc(\"Address\", doc.customer_address) %}\n         {% endif %}\n\t{% if doc.contact_person %}\n         {%  set contact = frappe.get_doc(\"Contact\", doc.contact_person) %}\n         <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:120%;\">Buyer</p>\n            <p style=\"font-size:140%;\">{{ doc.customer or doc.customer_name }}</p>\n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Contact Person : </b>{{ doc.contact_display or \"\" }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email Id : </b>{{ contact.email_id or \"\" }}</p></td>\n\t{% else %}\n\t\t <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:120%;\">Buyer</p>\n            <p style=\"font-size:140%;\">{{ doc.customer or doc.customer_name }}</p>\n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Contact Person : </b>{{ doc.contact_display or \"\" }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email Id : </b></p></td>\n\t{% endif %}\n\t</tr>\n</table>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n\t\t<th><font size = \"1\">Sr</font></th>\n\t\t<th><font size = \"1\">Particulars</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Qty</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Rate</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">GST Rate %</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Disc</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Amount</font></th>\n\t</tr>\n\t{% set cgst_rate = [] -%}\n\t{% set sgst_rate = [] -%}\n\t{% set igst_rate = [] -%}\n\t{% set cgst_account_head = [] -%}\n\t{% set sgst_account_head = [] -%}\n\t{% set igst_account_head = [] -%}\n\t{% set tot_cgst_amount = [] %}\n\t{% set tot_sgst_amount = [] %}\n\t{% set grand_total = {\"qty\":0.0, \"amount\":0.0, \"cgst_amt\":0.0, \"sgst_amt\":0.0, \"igst_amt\":0.0} %}\n\n\t{%- for row in doc.taxes -%}\n\t{% if 'CGST' in row.account_head -%}\n\t\t{% set _ = cgst_account_head.append(row.account_head) %}\n\t\t{% set _ = cgst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{% if 'SGST' in row.account_head -%}\n\t\t{% set _ = sgst_account_head.append(row.account_head) %}\n\t\t{% set _ = sgst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{% if 'IGST' in row.account_head -%}\n\t\t{% set _ = igst_account_head.append(row.account_head) %}\n\t\t{% set _ = igst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{%- endfor -%}\n\n\t{%- for row in doc.items -%}\n\t\t<tr width=\"100%\">\n\t\t        {% set cgst_amt = [] -%}\n\t\t \t {% set sgst_amt = [] -%}\n\t\t\t {% set igst_amt = [] -%}\n\t\t\t {% set it_cgst_rate = [] -%}\n\t\t \t {% set it_sgst_rate = [] -%}\n\t\t\t {% set it_igst_rate = [] -%}\n\t\t\t {% set rate_found_item = 0 -%}\n\n\t\t\t\t\t\t\t\t\n\t\t      {%- set item_record = frappe.get_doc(\"Item\", row.item_code) -%}\n\t\t\t{% for item_tax in item_record.taxes %}\n\n  \t\t\t  {% if item_tax.tax_type == igst_account_head[0] %}\n\t\t\t\t\n\t\t\t\t{% set _ = it_igst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = igst_amt.append(row.amount * it_igst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\t\n\t\t\t{% if item_tax.tax_type == sgst_account_head[0] %}\n\t\t\t\t\n\t\t\t\t{% set _ = it_sgst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = sgst_amt.append(row.amount * it_sgst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\n\t\t\t{% if item_tax.tax_type == cgst_account_head[0] %}\n\t\t\t\t{% set _ = it_cgst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = cgst_amt.append(row.amount * it_cgst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\t\n\n\n\t\t{% endfor %}\t\n\t  \t{% if rate_found_item == 0 %}\n\n\t\t\t{% if cgst_rate[0] -%}\n\t\t\t   {% set _ = cgst_amt.append((row.amount * cgst_rate[0])/100) -%}\n\t\t\t   {% set _= it_cgst_rate.append(cgst_rate[0]) -%}\n\t\t\t   {% set rate_found_inv = 1 -%}\n\t\t       \t{%- endif -%}\n\t\t\t{% if sgst_rate[0] -%}\n\t\t\t   {% set _ = sgst_amt.append((row.amount * sgst_rate[0])/100) -%}\n\t\t\t   {% set _= it_sgst_rate.append(sgst_rate[0]) -%}\n\t\t\t   \n\t\t       \t{%- endif -%}\n\t\t\t{% if igst_rate[0] -%}\n\t\t\t   {% set _ = igst_amt.append((row.amount * igst_rate[0])/100) -%}\n\t\t\t   {% set _= it_igst_rate.append(igst_rate[0]) -%}\n\t\t\t   {% set rate_found_inv = 1 -%}\n\t\t       \t{%- endif -%}\n\t\t{% endif %}\n\t\n\t\n\t\t{% if not it_cgst_rate[0] %}\n\t\t\t{% set _ = it_cgst_rate.append(0) %}\n\t\t\t{% set _ = cgst_amt.append(0) %}\n\t\t{% endif %}\n\t\t{% if not it_sgst_rate[0] %}\n\t\t\t{% set _ = it_sgst_rate.append(0) %}\n\t\t\t{% set _ = sgst_amt.append(0) %}\n\t\t{% endif %}\n\t\t{% if not it_igst_rate[0] %}\n\t\t\t{% set _ = it_igst_rate.append(0) %}\n\t\t\t{% set _ = igst_amt.append(0) %}\n\t\t{% endif %}\n\n\t\t{% set temp_cgst_amt = grand_total[\"cgst_amt\"] + cgst_amt[0] %}\n\t\t{% set temp_sgst_amt = grand_total[\"sgst_amt\"] + sgst_amt[0] %}\n\t\t{% set temp_igst_amt = grand_total[\"igst_amt\"] + igst_amt[0] %}\n\t\t{% set temp_qty = grand_total[\"qty\"] + row.qty %}\n\t\t{% set temp_amount = grand_total[\"amount\"] + row.amount %}\n\t\t{% set check = grand_total.update({\"qty\": temp_qty, \"amount\": temp_amount, \"cgst_amt\":temp_cgst_amt, \"sgst_amt\":temp_sgst_amt, \"igst_amt\":temp_igst_amt}) %}\n\n\t\t{% if row.idx > 8 and row.idx < 17 -%}\n\t\t<td style=\"width: 3%;\"><font size = \"1\">{{ row.idx }}</font></td>\n\t\t<td style=\"width: 50%;\"><font size = \"1\"><b>Item Code : </b>{{ row.item_code }}&nbsp;&nbsp;<b>HSN Code : <b>{{ row.gst_hsn_code or '' }}<br><b>Item name : </b>{{ row.item_name }}</font></td>\n\t\t<td style=\"width: 7%; text-align: right;\"><font size = \"1\">{{ row.qty }} {{ row.uom or row.stock_uom }}</font></td>\n\t\t<td style=\"width: 10%; text-align: right;\"><font size = \"1\">{{row.get_formatted(\"price_list_rate\", doc) }}</font></td>\t\t\t\n\t\t<td style=\"width: 7%; text-align: right;\">{{ (it_cgst_rate[0] +it_sgst_rate[0]) or it_igst_rate[0]}}%</td>\n\t\t<td style=\"width: 9%; text-align: right;\"><font size = \"1\">{{ row.get_formatted(\"discount_percentage\", doc) }}</font></td>\n\t\t<td style=\"width: 14%; text-align: right;\"><font size = \"1\">{{row.get_formatted(\"amount\", doc) }}</font></td>\n</tr>\n\t{% endif %}\n   {% endfor %}\n</table>\n{% endif %}\n{% if doc.items|length >= 17 -%}\t\n<div class = \"page-break\"></div>\n<p align=left><img style=\"width:150px;height:100px;\" src=\"/files/hexa.png\" style=\"margin:5px;\" class=\"img-responsive\"></p>\n<br>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n         <th colspan = \"2\"; height=\"20\">\n         <center><font size=\"3\"><strong>Sales Invoice</strong></font></center>\n         </th>\n      </tr>\n\t<tr>\n         <td style=\"width: 30%;\"><b>Invoice No : {{ doc.name }}</b></td>\n         <td style=\"width: 30%;\"><b>Date : {{ doc.get_formatted('posting_date') }}</b></td>\n      </tr>\n\t<tr width=\"100%\">\n         {%  set billing = frappe.get_doc(\"Address\", \"Head Office-Billing\") %}\n         <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:140%;\"><strong>{{ doc.company }} </strong></p>\n            \n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email : </b>{{ billing.email_id }}</p>\n           </td>\n\t{% if doc.customer_address %}\n         {%  set billing = frappe.get_doc(\"Address\", doc.customer_address) %}\n         {% endif %}\n\t{% if doc.contact_person %}\n         {%  set contact = frappe.get_doc(\"Contact\", doc.contact_person) %}\n         <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:120%;\">Buyer</p>\n            <p style=\"font-size:140%;\">{{ doc.customer or doc.customer_name }}</p>\n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Contact Person : </b>{{ doc.contact_display or \"\" }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email Id : </b>{{ contact.email_id or \"\" }}</p></td>\n\t{% else %}\n\t\t <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:120%;\">Buyer</p>\n            <p style=\"font-size:140%;\">{{ doc.customer or doc.customer_name }}</p>\n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Contact Person : </b>{{ doc.contact_display or \"\" }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email Id : </b></p></td>\n\t{% endif %}\n\t</tr>\n</table>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n\t\t<th><font size = \"1\">Sr</font></th>\n\t\t<th><font size = \"1\">Particulars</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Qty</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Rate</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">GST Rate %</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Disc</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Amount</font></th>\n\t</tr>\n\t{% set cgst_rate = [] -%}\n\t{% set sgst_rate = [] -%}\n\t{% set igst_rate = [] -%}\n\t{% set cgst_account_head = [] -%}\n\t{% set sgst_account_head = [] -%}\n\t{% set igst_account_head = [] -%}\n\t{% set tot_cgst_amount = [] %}\n\t{% set tot_sgst_amount = [] %}\n\t{% set grand_total = {\"qty\":0.0, \"amount\":0.0, \"cgst_amt\":0.0, \"sgst_amt\":0.0, \"igst_amt\":0.0} %}\n\n\t{%- for row in doc.taxes -%}\n\t{% if 'CGST' in row.account_head -%}\n\t\t{% set _ = cgst_account_head.append(row.account_head) %}\n\t\t{% set _ = cgst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{% if 'SGST' in row.account_head -%}\n\t\t{% set _ = sgst_account_head.append(row.account_head) %}\n\t\t{% set _ = sgst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{% if 'IGST' in row.account_head -%}\n\t\t{% set _ = igst_account_head.append(row.account_head) %}\n\t\t{% set _ = igst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{%- endfor -%}\n\n\t{%- for row in doc.items -%}\n\t\t<tr width=\"100%\">\n\t\t        {% set cgst_amt = [] -%}\n\t\t \t {% set sgst_amt = [] -%}\n\t\t\t {% set igst_amt = [] -%}\n\t\t\t {% set it_cgst_rate = [] -%}\n\t\t \t {% set it_sgst_rate = [] -%}\n\t\t\t {% set it_igst_rate = [] -%}\n\t\t\t {% set rate_found_item = 0 -%}\n\n\t\t\t\t\t\t\t\t\n\t\t      {%- set item_record = frappe.get_doc(\"Item\", row.item_code) -%}\n\t\t\t{% for item_tax in item_record.taxes %}\n\n  \t\t\t  {% if item_tax.tax_type == igst_account_head[0] %}\n\t\t\t\t\n\t\t\t\t{% set _ = it_igst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = igst_amt.append(row.amount * it_igst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\t\n\t\t\t{% if item_tax.tax_type == sgst_account_head[0] %}\n\t\t\t\t\n\t\t\t\t{% set _ = it_sgst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = sgst_amt.append(row.amount * it_sgst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\n\t\t\t{% if item_tax.tax_type == cgst_account_head[0] %}\n\t\t\t\t{% set _ = it_cgst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = cgst_amt.append(row.amount * it_cgst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\t\n\n\n\t\t{% endfor %}\t\n\t  \t{% if rate_found_item == 0 %}\n\n\t\t\t{% if cgst_rate[0] -%}\n\t\t\t   {% set _ = cgst_amt.append((row.amount * cgst_rate[0])/100) -%}\n\t\t\t   {% set _= it_cgst_rate.append(cgst_rate[0]) -%}\n\t\t\t   {% set rate_found_inv = 1 -%}\n\t\t       \t{%- endif -%}\n\t\t\t{% if sgst_rate[0] -%}\n\t\t\t   {% set _ = sgst_amt.append((row.amount * sgst_rate[0])/100) -%}\n\t\t\t   {% set _= it_sgst_rate.append(sgst_rate[0]) -%}\n\t\t\t   \n\t\t       \t{%- endif -%}\n\t\t\t{% if igst_rate[0] -%}\n\t\t\t   {% set _ = igst_amt.append((row.amount * igst_rate[0])/100) -%}\n\t\t\t   {% set _= it_igst_rate.append(igst_rate[0]) -%}\n\t\t\t   {% set rate_found_inv = 1 -%}\n\t\t       \t{%- endif -%}\n\t\t{% endif %}\n\t\n\t\n\t\t{% if not it_cgst_rate[0] %}\n\t\t\t{% set _ = it_cgst_rate.append(0) %}\n\t\t\t{% set _ = cgst_amt.append(0) %}\n\t\t{% endif %}\n\t\t{% if not it_sgst_rate[0] %}\n\t\t\t{% set _ = it_sgst_rate.append(0) %}\n\t\t\t{% set _ = sgst_amt.append(0) %}\n\t\t{% endif %}\n\t\t{% if not it_igst_rate[0] %}\n\t\t\t{% set _ = it_igst_rate.append(0) %}\n\t\t\t{% set _ = igst_amt.append(0) %}\n\t\t{% endif %}\n\n\t\t{% set temp_cgst_amt = grand_total[\"cgst_amt\"] + cgst_amt[0] %}\n\t\t{% set temp_sgst_amt = grand_total[\"sgst_amt\"] + sgst_amt[0] %}\n\t\t{% set temp_igst_amt = grand_total[\"igst_amt\"] + igst_amt[0] %}\n\t\t{% set temp_qty = grand_total[\"qty\"] + row.qty %}\n\t\t{% set temp_amount = grand_total[\"amount\"] + row.amount %}\n\t\t{% set check = grand_total.update({\"qty\": temp_qty, \"amount\": temp_amount, \"cgst_amt\":temp_cgst_amt, \"sgst_amt\":temp_sgst_amt, \"igst_amt\":temp_igst_amt}) %}\n\n\t\t{% if row.idx > 16 and row.idx < 25 -%}\n\t\t<td style=\"width: 3%;\"><font size = \"1\">{{ row.idx }}</font></td>\n\t\t<td style=\"width: 50%;\"><font size = \"1\"><b>Item Code : </b>{{ row.item_code }}&nbsp;&nbsp;<b>HSN Code : <b>{{ row.gst_hsn_code or '' }}<br><b>Item name : </b>{{ row.item_name }}</font></td>\n\t\t<td style=\"width: 7%; text-align: right;\"><font size = \"1\">{{ row.qty }} {{ row.uom or row.stock_uom }}</font></td>\n\t\t<td style=\"width: 10%; text-align: right;\"><font size = \"1\">{{row.get_formatted(\"price_list_rate\", doc) }}</font></td>\t\t\t\n\t\t<td style=\"width: 7%; text-align: right;\">{{ (it_cgst_rate[0] +it_sgst_rate[0]) or it_igst_rate[0]}}%</td>\n\t\t<td style=\"width: 9%; text-align: right;\"><font size = \"1\">{{ row.get_formatted(\"discount_percentage\", doc) }}</font></td>\n\t\t<td style=\"width: 14%; text-align: right;\"><font size = \"1\">{{row.get_formatted(\"amount\", doc) }}</font></td>\n</tr>\n\t{% endif %}\n   {% endfor %}\n</table>\n{% endif %}\n{% if doc.items|length >= 25 -%}\t\n<div class = \"page-break\"></div>\n<p align=left><img style=\"width:150px;height:100px;\" src=\"/files/hexa.png\" style=\"margin:5px;\" class=\"img-responsive\"></p>\n<br>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n         <th colspan = \"2\"; height=\"20\">\n         <center><font size=\"3\"><strong>Sales Invoice</strong></font></center>\n         </th>\n      </tr>\n\t<tr>\n         <td style=\"width: 30%;\"><b>Invoice No : {{ doc.name }}</b></td>\n         <td style=\"width: 30%;\"><b>Date : {{ doc.get_formatted('posting_date') }}</b></td>\n      </tr>\n\t<tr width=\"100%\">\n         {%  set billing = frappe.get_doc(\"Address\", \"Head Office-Billing\") %}\n         <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:140%;\"><strong>{{ doc.company }} </strong></p>\n            \n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email : </b>{{ billing.email_id }}</p>\n           </td>\n\t{% if doc.customer_address %}\n         {%  set billing = frappe.get_doc(\"Address\", doc.customer_address) %}\n         {% endif %}\n\t{% if doc.contact_person %}\n         {%  set contact = frappe.get_doc(\"Contact\", doc.contact_person) %}\n         <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:120%;\">Buyer</p>\n            <p style=\"font-size:140%;\">{{ doc.customer or doc.customer_name }}</p>\n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Contact Person : </b>{{ doc.contact_display or \"\" }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email Id : </b>{{ contact.email_id or \"\" }}</p></td>\n\t{% else %}\n\t\t <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:120%;\">Buyer</p>\n            <p style=\"font-size:140%;\">{{ doc.customer or doc.customer_name }}</p>\n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Contact Person : </b>{{ doc.contact_display or \"\" }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email Id : </b></p></td>\n\t{% endif %}\n\t</tr>\n</table>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n\t\t<th><font size = \"1\">Sr</font></th>\n\t\t<th><font size = \"1\">Particulars</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Qty</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Rate</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">GST Rate %</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Disc</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Amount</font></th>\n\t</tr>\n\t{% set cgst_rate = [] -%}\n\t{% set sgst_rate = [] -%}\n\t{% set igst_rate = [] -%}\n\t{% set cgst_account_head = [] -%}\n\t{% set sgst_account_head = [] -%}\n\t{% set igst_account_head = [] -%}\n\t{% set tot_cgst_amount = [] %}\n\t{% set tot_sgst_amount = [] %}\n\t{% set grand_total = {\"qty\":0.0, \"amount\":0.0, \"cgst_amt\":0.0, \"sgst_amt\":0.0, \"igst_amt\":0.0} %}\n\n\t{%- for row in doc.taxes -%}\n\t{% if 'CGST' in row.account_head -%}\n\t\t{% set _ = cgst_account_head.append(row.account_head) %}\n\t\t{% set _ = cgst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{% if 'SGST' in row.account_head -%}\n\t\t{% set _ = sgst_account_head.append(row.account_head) %}\n\t\t{% set _ = sgst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{% if 'IGST' in row.account_head -%}\n\t\t{% set _ = igst_account_head.append(row.account_head) %}\n\t\t{% set _ = igst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{%- endfor -%}\n\n\t{%- for row in doc.items -%}\n\t\t<tr width=\"100%\">\n\t\t        {% set cgst_amt = [] -%}\n\t\t \t {% set sgst_amt = [] -%}\n\t\t\t {% set igst_amt = [] -%}\n\t\t\t {% set it_cgst_rate = [] -%}\n\t\t \t {% set it_sgst_rate = [] -%}\n\t\t\t {% set it_igst_rate = [] -%}\n\t\t\t {% set rate_found_item = 0 -%}\n\n\t\t\t\t\t\t\t\t\n\t\t      {%- set item_record = frappe.get_doc(\"Item\", row.item_code) -%}\n\t\t\t{% for item_tax in item_record.taxes %}\n\n  \t\t\t  {% if item_tax.tax_type == igst_account_head[0] %}\n\t\t\t\t\n\t\t\t\t{% set _ = it_igst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = igst_amt.append(row.amount * it_igst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\t\n\t\t\t{% if item_tax.tax_type == sgst_account_head[0] %}\n\t\t\t\t\n\t\t\t\t{% set _ = it_sgst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = sgst_amt.append(row.amount * it_sgst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\n\t\t\t{% if item_tax.tax_type == cgst_account_head[0] %}\n\t\t\t\t{% set _ = it_cgst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = cgst_amt.append(row.amount * it_cgst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\t\n\n\n\t\t{% endfor %}\t\n\t  \t{% if rate_found_item == 0 %}\n\n\t\t\t{% if cgst_rate[0] -%}\n\t\t\t   {% set _ = cgst_amt.append((row.amount * cgst_rate[0])/100) -%}\n\t\t\t   {% set _= it_cgst_rate.append(cgst_rate[0]) -%}\n\t\t\t   {% set rate_found_inv = 1 -%}\n\t\t       \t{%- endif -%}\n\t\t\t{% if sgst_rate[0] -%}\n\t\t\t   {% set _ = sgst_amt.append((row.amount * sgst_rate[0])/100) -%}\n\t\t\t   {% set _= it_sgst_rate.append(sgst_rate[0]) -%}\n\t\t\t   \n\t\t       \t{%- endif -%}\n\t\t\t{% if igst_rate[0] -%}\n\t\t\t   {% set _ = igst_amt.append((row.amount * igst_rate[0])/100) -%}\n\t\t\t   {% set _= it_igst_rate.append(igst_rate[0]) -%}\n\t\t\t   {% set rate_found_inv = 1 -%}\n\t\t       \t{%- endif -%}\n\t\t{% endif %}\n\t\n\t\n\t\t{% if not it_cgst_rate[0] %}\n\t\t\t{% set _ = it_cgst_rate.append(0) %}\n\t\t\t{% set _ = cgst_amt.append(0) %}\n\t\t{% endif %}\n\t\t{% if not it_sgst_rate[0] %}\n\t\t\t{% set _ = it_sgst_rate.append(0) %}\n\t\t\t{% set _ = sgst_amt.append(0) %}\n\t\t{% endif %}\n\t\t{% if not it_igst_rate[0] %}\n\t\t\t{% set _ = it_igst_rate.append(0) %}\n\t\t\t{% set _ = igst_amt.append(0) %}\n\t\t{% endif %}\n\n\t\t{% set temp_cgst_amt = grand_total[\"cgst_amt\"] + cgst_amt[0] %}\n\t\t{% set temp_sgst_amt = grand_total[\"sgst_amt\"] + sgst_amt[0] %}\n\t\t{% set temp_igst_amt = grand_total[\"igst_amt\"] + igst_amt[0] %}\n\t\t{% set temp_qty = grand_total[\"qty\"] + row.qty %}\n\t\t{% set temp_amount = grand_total[\"amount\"] + row.amount %}\n\t\t{% set check = grand_total.update({\"qty\": temp_qty, \"amount\": temp_amount, \"cgst_amt\":temp_cgst_amt, \"sgst_amt\":temp_sgst_amt, \"igst_amt\":temp_igst_amt}) %}\n\n\t\t{% if row.idx > 24 and row.idx < 33 -%}\n\t\t<td style=\"width: 3%;\"><font size = \"1\">{{ row.idx }}</font></td>\n\t\t<td style=\"width: 50%;\"><font size = \"1\"><b>Item Code : </b>{{ row.item_code }}&nbsp;&nbsp;<b>HSN Code : <b>{{ row.gst_hsn_code or '' }}<br><b>Item name : </b>{{ row.item_name }}</font></td>\n\t\t<td style=\"width: 7%; text-align: right;\"><font size = \"1\">{{ row.qty }} {{ row.uom or row.stock_uom }}</font></td>\n\t\t<td style=\"width: 10%; text-align: right;\"><font size = \"1\">{{row.get_formatted(\"price_list_rate\", doc) }}</font></td>\t\t\t\n\t\t<td style=\"width: 7%; text-align: right;\">{{ (it_cgst_rate[0] +it_sgst_rate[0]) or it_igst_rate[0]}}%</td>\n\t\t<td style=\"width: 9%; text-align: right;\"><font size = \"1\">{{ row.get_formatted(\"discount_percentage\", doc) }}</font></td>\n\t\t<td style=\"width: 14%; text-align: right;\"><font size = \"1\">{{row.get_formatted(\"amount\", doc) }}</font></td>\n</tr>\n\t{% endif %}\n   {% endfor %}\n</table>\n{% endif %}\n{% if doc.items|length >= 33 -%}\t\n<div class = \"page-break\"></div>\n<p align=left><img style=\"width:150px;height:100px;\" src=\"/files/hexa.png\" style=\"margin:5px;\" class=\"img-responsive\"></p>\n<br>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n         <th colspan = \"2\"; height=\"20\">\n         <center><font size=\"3\"><strong>Sales Invoice</strong></font></center>\n         </th>\n      </tr>\n\t<tr>\n         <td style=\"width: 30%;\"><b>Invoice No : {{ doc.name }}</b></td>\n         <td style=\"width: 30%;\"><b>Date : {{ doc.get_formatted('posting_date') }}</b></td>\n      </tr>\n\t<tr width=\"100%\">\n         {%  set billing = frappe.get_doc(\"Address\", \"Head Office-Billing\") %}\n         <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:140%;\"><strong>{{ doc.company }} </strong></p>\n            \n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email : </b>{{ billing.email_id }}</p>\n           </td>\n\t{% if doc.customer_address %}\n         {%  set billing = frappe.get_doc(\"Address\", doc.customer_address) %}\n         {% endif %}\n\t{% if doc.contact_person %}\n         {%  set contact = frappe.get_doc(\"Contact\", doc.contact_person) %}\n         <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:120%;\">Buyer</p>\n            <p style=\"font-size:140%;\">{{ doc.customer or doc.customer_name }}</p>\n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Contact Person : </b>{{ doc.contact_display or \"\" }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email Id : </b>{{ contact.email_id or \"\" }}</p></td>\n\t{% else %}\n\t\t <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:120%;\">Buyer</p>\n            <p style=\"font-size:140%;\">{{ doc.customer or doc.customer_name }}</p>\n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Contact Person : </b>{{ doc.contact_display or \"\" }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email Id : </b></p></td>\n\t{% endif %}\n\t</tr>\n</table>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n\t\t<th><font size = \"1\">Sr</font></th>\n\t\t<th><font size = \"1\">Particulars</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Qty</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Rate</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">GST Rate %</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Disc</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Amount</font></th>\n\t</tr>\n\t{% set cgst_rate = [] -%}\n\t{% set sgst_rate = [] -%}\n\t{% set igst_rate = [] -%}\n\t{% set cgst_account_head = [] -%}\n\t{% set sgst_account_head = [] -%}\n\t{% set igst_account_head = [] -%}\n\t{% set tot_cgst_amount = [] %}\n\t{% set tot_sgst_amount = [] %}\n\t{% set grand_total = {\"qty\":0.0, \"amount\":0.0, \"cgst_amt\":0.0, \"sgst_amt\":0.0, \"igst_amt\":0.0} %}\n\n\t{%- for row in doc.taxes -%}\n\t{% if 'CGST' in row.account_head -%}\n\t\t{% set _ = cgst_account_head.append(row.account_head) %}\n\t\t{% set _ = cgst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{% if 'SGST' in row.account_head -%}\n\t\t{% set _ = sgst_account_head.append(row.account_head) %}\n\t\t{% set _ = sgst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{% if 'IGST' in row.account_head -%}\n\t\t{% set _ = igst_account_head.append(row.account_head) %}\n\t\t{% set _ = igst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{%- endfor -%}\n\n\t{%- for row in doc.items -%}\n\t\t<tr width=\"100%\">\n\t\t        {% set cgst_amt = [] -%}\n\t\t \t {% set sgst_amt = [] -%}\n\t\t\t {% set igst_amt = [] -%}\n\t\t\t {% set it_cgst_rate = [] -%}\n\t\t \t {% set it_sgst_rate = [] -%}\n\t\t\t {% set it_igst_rate = [] -%}\n\t\t\t {% set rate_found_item = 0 -%}\n\n\t\t\t\t\t\t\t\t\n\t\t      {%- set item_record = frappe.get_doc(\"Item\", row.item_code) -%}\n\t\t\t{% for item_tax in item_record.taxes %}\n\n  \t\t\t  {% if item_tax.tax_type == igst_account_head[0] %}\n\t\t\t\t\n\t\t\t\t{% set _ = it_igst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = igst_amt.append(row.amount * it_igst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\t\n\t\t\t{% if item_tax.tax_type == sgst_account_head[0] %}\n\t\t\t\t\n\t\t\t\t{% set _ = it_sgst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = sgst_amt.append(row.amount * it_sgst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\n\t\t\t{% if item_tax.tax_type == cgst_account_head[0] %}\n\t\t\t\t{% set _ = it_cgst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = cgst_amt.append(row.amount * it_cgst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\t\n\n\n\t\t{% endfor %}\t\n\t  \t{% if rate_found_item == 0 %}\n\n\t\t\t{% if cgst_rate[0] -%}\n\t\t\t   {% set _ = cgst_amt.append((row.amount * cgst_rate[0])/100) -%}\n\t\t\t   {% set _= it_cgst_rate.append(cgst_rate[0]) -%}\n\t\t\t   {% set rate_found_inv = 1 -%}\n\t\t       \t{%- endif -%}\n\t\t\t{% if sgst_rate[0] -%}\n\t\t\t   {% set _ = sgst_amt.append((row.amount * sgst_rate[0])/100) -%}\n\t\t\t   {% set _= it_sgst_rate.append(sgst_rate[0]) -%}\n\t\t\t   \n\t\t       \t{%- endif -%}\n\t\t\t{% if igst_rate[0] -%}\n\t\t\t   {% set _ = igst_amt.append((row.amount * igst_rate[0])/100) -%}\n\t\t\t   {% set _= it_igst_rate.append(igst_rate[0]) -%}\n\t\t\t   {% set rate_found_inv = 1 -%}\n\t\t       \t{%- endif -%}\n\t\t{% endif %}\n\t\n\t\n\t\t{% if not it_cgst_rate[0] %}\n\t\t\t{% set _ = it_cgst_rate.append(0) %}\n\t\t\t{% set _ = cgst_amt.append(0) %}\n\t\t{% endif %}\n\t\t{% if not it_sgst_rate[0] %}\n\t\t\t{% set _ = it_sgst_rate.append(0) %}\n\t\t\t{% set _ = sgst_amt.append(0) %}\n\t\t{% endif %}\n\t\t{% if not it_igst_rate[0] %}\n\t\t\t{% set _ = it_igst_rate.append(0) %}\n\t\t\t{% set _ = igst_amt.append(0) %}\n\t\t{% endif %}\n\n\t\t{% set temp_cgst_amt = grand_total[\"cgst_amt\"] + cgst_amt[0] %}\n\t\t{% set temp_sgst_amt = grand_total[\"sgst_amt\"] + sgst_amt[0] %}\n\t\t{% set temp_igst_amt = grand_total[\"igst_amt\"] + igst_amt[0] %}\n\t\t{% set temp_qty = grand_total[\"qty\"] + row.qty %}\n\t\t{% set temp_amount = grand_total[\"amount\"] + row.amount %}\n\t\t{% set check = grand_total.update({\"qty\": temp_qty, \"amount\": temp_amount, \"cgst_amt\":temp_cgst_amt, \"sgst_amt\":temp_sgst_amt, \"igst_amt\":temp_igst_amt}) %}\n\n\t\t{% if row.idx > 32 and row.idx < 41 -%}\n\t\t<td style=\"width: 3%;\"><font size = \"1\">{{ row.idx }}</font></td>\n\t\t<td style=\"width: 50%;\"><font size = \"1\"><b>Item Code : </b>{{ row.item_code }}&nbsp;&nbsp;<b>HSN Code : <b>{{ row.gst_hsn_code or '' }}<br><b>Item name : </b>{{ row.item_name }}</font></td>\n\t\t<td style=\"width: 7%; text-align: right;\"><font size = \"1\">{{ row.qty }} {{ row.uom or row.stock_uom }}</font></td>\n\t\t<td style=\"width: 10%; text-align: right;\"><font size = \"1\">{{row.get_formatted(\"price_list_rate\", doc) }}</font></td>\t\t\t\n\t\t<td style=\"width: 7%; text-align: right;\">{{ (it_cgst_rate[0] +it_sgst_rate[0]) or it_igst_rate[0]}}%</td>\n\t\t<td style=\"width: 9%; text-align: right;\"><font size = \"1\">{{ row.get_formatted(\"discount_percentage\", doc) }}</font></td>\n\t\t<td style=\"width: 14%; text-align: right;\"><font size = \"1\">{{row.get_formatted(\"amount\", doc) }}</font></td>\n</tr>\n\t{% endif %}\n   {% endfor %}\n</table>\n{% endif %}\n{% if doc.items|length >= 41 -%}\t\n<div class = \"page-break\"></div>\n<p align=left><img style=\"width:150px;height:100px;\" src=\"/files/hexa.png\" style=\"margin:5px;\" class=\"img-responsive\"></p>\n<br>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n         <th colspan = \"2\"; height=\"20\">\n         <center><font size=\"3\"><strong>Sales Invoice</strong></font></center>\n         </th>\n      </tr>\n\t<tr>\n         <td style=\"width: 30%;\"><b>Invoice No : {{ doc.name }}</b></td>\n         <td style=\"width: 30%;\"><b>Date : {{ doc.get_formatted('posting_date') }}</b></td>\n      </tr>\n\t<tr width=\"100%\">\n         {%  set billing = frappe.get_doc(\"Address\", \"Head Office-Billing\") %}\n         <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:140%;\"><strong>{{ doc.company }} </strong></p>\n            \n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email : </b>{{ billing.email_id }}</p>\n           </td>\n\t{% if doc.customer_address %}\n         {%  set billing = frappe.get_doc(\"Address\", doc.customer_address) %}\n         {% endif %}\n\t{% if doc.contact_person %}\n         {%  set contact = frappe.get_doc(\"Contact\", doc.contact_person) %}\n         <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:120%;\">Buyer</p>\n            <p style=\"font-size:140%;\">{{ doc.customer or doc.customer_name }}</p>\n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Contact Person : </b>{{ doc.contact_display or \"\" }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email Id : </b>{{ contact.email_id or \"\" }}</p></td>\n\t{% else %}\n\t\t <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:120%;\">Buyer</p>\n            <p style=\"font-size:140%;\">{{ doc.customer or doc.customer_name }}</p>\n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Contact Person : </b>{{ doc.contact_display or \"\" }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email Id : </b></p></td>\n\t{% endif %}\n\t</tr>\n</table>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n\t\t<th><font size = \"1\">Sr</font></th>\n\t\t<th><font size = \"1\">Particulars</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Qty</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Rate</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">GST Rate %</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Disc</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Amount</font></th>\n\t</tr>\n\t{% set cgst_rate = [] -%}\n\t{% set sgst_rate = [] -%}\n\t{% set igst_rate = [] -%}\n\t{% set cgst_account_head = [] -%}\n\t{% set sgst_account_head = [] -%}\n\t{% set igst_account_head = [] -%}\n\t{% set tot_cgst_amount = [] %}\n\t{% set tot_sgst_amount = [] %}\n\t{% set grand_total = {\"qty\":0.0, \"amount\":0.0, \"cgst_amt\":0.0, \"sgst_amt\":0.0, \"igst_amt\":0.0} %}\n\n\t{%- for row in doc.taxes -%}\n\t{% if 'CGST' in row.account_head -%}\n\t\t{% set _ = cgst_account_head.append(row.account_head) %}\n\t\t{% set _ = cgst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{% if 'SGST' in row.account_head -%}\n\t\t{% set _ = sgst_account_head.append(row.account_head) %}\n\t\t{% set _ = sgst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{% if 'IGST' in row.account_head -%}\n\t\t{% set _ = igst_account_head.append(row.account_head) %}\n\t\t{% set _ = igst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{%- endfor -%}\n\n\t{%- for row in doc.items -%}\n\t\t<tr width=\"100%\">\n\t\t        {% set cgst_amt = [] -%}\n\t\t \t {% set sgst_amt = [] -%}\n\t\t\t {% set igst_amt = [] -%}\n\t\t\t {% set it_cgst_rate = [] -%}\n\t\t \t {% set it_sgst_rate = [] -%}\n\t\t\t {% set it_igst_rate = [] -%}\n\t\t\t {% set rate_found_item = 0 -%}\n\n\t\t\t\t\t\t\t\t\n\t\t      {%- set item_record = frappe.get_doc(\"Item\", row.item_code) -%}\n\t\t\t{% for item_tax in item_record.taxes %}\n\n  \t\t\t  {% if item_tax.tax_type == igst_account_head[0] %}\n\t\t\t\t\n\t\t\t\t{% set _ = it_igst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = igst_amt.append(row.amount * it_igst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\t\n\t\t\t{% if item_tax.tax_type == sgst_account_head[0] %}\n\t\t\t\t\n\t\t\t\t{% set _ = it_sgst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = sgst_amt.append(row.amount * it_sgst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\n\t\t\t{% if item_tax.tax_type == cgst_account_head[0] %}\n\t\t\t\t{% set _ = it_cgst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = cgst_amt.append(row.amount * it_cgst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\t\n\n\n\t\t{% endfor %}\t\n\t  \t{% if rate_found_item == 0 %}\n\n\t\t\t{% if cgst_rate[0] -%}\n\t\t\t   {% set _ = cgst_amt.append((row.amount * cgst_rate[0])/100) -%}\n\t\t\t   {% set _= it_cgst_rate.append(cgst_rate[0]) -%}\n\t\t\t   {% set rate_found_inv = 1 -%}\n\t\t       \t{%- endif -%}\n\t\t\t{% if sgst_rate[0] -%}\n\t\t\t   {% set _ = sgst_amt.append((row.amount * sgst_rate[0])/100) -%}\n\t\t\t   {% set _= it_sgst_rate.append(sgst_rate[0]) -%}\n\t\t\t   \n\t\t       \t{%- endif -%}\n\t\t\t{% if igst_rate[0] -%}\n\t\t\t   {% set _ = igst_amt.append((row.amount * igst_rate[0])/100) -%}\n\t\t\t   {% set _= it_igst_rate.append(igst_rate[0]) -%}\n\t\t\t   {% set rate_found_inv = 1 -%}\n\t\t       \t{%- endif -%}\n\t\t{% endif %}\n\t\n\t\n\t\t{% if not it_cgst_rate[0] %}\n\t\t\t{% set _ = it_cgst_rate.append(0) %}\n\t\t\t{% set _ = cgst_amt.append(0) %}\n\t\t{% endif %}\n\t\t{% if not it_sgst_rate[0] %}\n\t\t\t{% set _ = it_sgst_rate.append(0) %}\n\t\t\t{% set _ = sgst_amt.append(0) %}\n\t\t{% endif %}\n\t\t{% if not it_igst_rate[0] %}\n\t\t\t{% set _ = it_igst_rate.append(0) %}\n\t\t\t{% set _ = igst_amt.append(0) %}\n\t\t{% endif %}\n\n\t\t{% set temp_cgst_amt = grand_total[\"cgst_amt\"] + cgst_amt[0] %}\n\t\t{% set temp_sgst_amt = grand_total[\"sgst_amt\"] + sgst_amt[0] %}\n\t\t{% set temp_igst_amt = grand_total[\"igst_amt\"] + igst_amt[0] %}\n\t\t{% set temp_qty = grand_total[\"qty\"] + row.qty %}\n\t\t{% set temp_amount = grand_total[\"amount\"] + row.amount %}\n\t\t{% set check = grand_total.update({\"qty\": temp_qty, \"amount\": temp_amount, \"cgst_amt\":temp_cgst_amt, \"sgst_amt\":temp_sgst_amt, \"igst_amt\":temp_igst_amt}) %}\n\n\t\t{% if row.idx > 40 and row.idx < 49 -%}\n\t\t<td style=\"width: 3%;\"><font size = \"1\">{{ row.idx }}</font></td>\n\t\t<td style=\"width: 50%;\"><font size = \"1\"><b>Item Code : </b>{{ row.item_code }}&nbsp;&nbsp;<b>HSN Code : <b>{{ row.gst_hsn_code or '' }}<br><b>Item name : </b>{{ row.item_name }}</font></td>\n\t\t<td style=\"width: 7%; text-align: right;\"><font size = \"1\">{{ row.qty }} {{ row.uom or row.stock_uom }}</font></td>\n\t\t<td style=\"width: 10%; text-align: right;\"><font size = \"1\">{{row.get_formatted(\"price_list_rate\", doc) }}</font></td>\t\t\t\n\t\t<td style=\"width: 7%; text-align: right;\">{{ (it_cgst_rate[0] +it_sgst_rate[0]) or it_igst_rate[0]}}%</td>\n\t\t<td style=\"width: 9%; text-align: right;\"><font size = \"1\">{{ row.get_formatted(\"discount_percentage\", doc) }}</font></td>\n\t\t<td style=\"width: 14%; text-align: right;\"><font size = \"1\">{{row.get_formatted(\"amount\", doc) }}</font></td>\n</tr>\n\t{% endif %}\n   {% endfor %}\n</table>\n{% endif %}\n{% if doc.items|length >= 49 -%}\t\n<div class = \"page-break\"></div>\n<p align=left><img style=\"width:150px;height:100px;\" src=\"/files/hexa.png\" style=\"margin:5px;\" class=\"img-responsive\"></p>\n<br>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n         <th colspan = \"2\"; height=\"20\">\n         <center><font size=\"3\"><strong>Sales Invoice</strong></font></center>\n         </th>\n      </tr>\n\t<tr>\n         <td style=\"width: 30%;\"><b>Invoice No : {{ doc.name }}</b></td>\n         <td style=\"width: 30%;\"><b>Date : {{ doc.get_formatted('posting_date') }}</b></td>\n      </tr>\n\t<tr width=\"100%\">\n         {%  set billing = frappe.get_doc(\"Address\", \"Head Office-Billing\") %}\n         <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:140%;\"><strong>{{ doc.company }} </strong></p>\n            \n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email : </b>{{ billing.email_id }}</p>\n           </td>\n\t{% if doc.customer_address %}\n         {%  set billing = frappe.get_doc(\"Address\", doc.customer_address) %}\n         {% endif %}\n\t{% if doc.contact_person %}\n         {%  set contact = frappe.get_doc(\"Contact\", doc.contact_person) %}\n         <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:120%;\">Buyer</p>\n            <p style=\"font-size:140%;\">{{ doc.customer or doc.customer_name }}</p>\n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Contact Person : </b>{{ doc.contact_display or \"\" }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email Id : </b>{{ contact.email_id or \"\" }}</p></td>\n\t{% else %}\n\t\t <td style=\"width: 40%;\" rowspan = \"2\">\n            <p style=\"font-size:120%;\">Buyer</p>\n            <p style=\"font-size:140%;\">{{ doc.customer or doc.customer_name }}</p>\n            <p style=\"font-size:100%;\">{{ billing.address_line1 }}<br>{{ billing.address_line2 }}<br>{{ billing.city }},{{ billing.state }}<br><b>GSTIN : </b>{{ billing.gstin }}<br><b>Contact Person : </b>{{ doc.contact_display or \"\" }}<br><b>Tel No : </b>{{ billing.phone }}<br><b>Email Id : </b></p></td>\n\t{% endif %}\n\t</tr>\n</table>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n\t\t<th><font size = \"1\">Sr</font></th>\n\t\t<th><font size = \"1\">Particulars</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Qty</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Rate</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">GST Rate %</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Disc</font></th>\n\t\t<th class=\"text-right\"><font size = \"1\">Amount</font></th>\n\t</tr>\n\t{% set cgst_rate = [] -%}\n\t{% set sgst_rate = [] -%}\n\t{% set igst_rate = [] -%}\n\t{% set cgst_account_head = [] -%}\n\t{% set sgst_account_head = [] -%}\n\t{% set igst_account_head = [] -%}\n\t{% set tot_cgst_amount = [] %}\n\t{% set tot_sgst_amount = [] %}\n\t{% set grand_total = {\"qty\":0.0, \"amount\":0.0, \"cgst_amt\":0.0, \"sgst_amt\":0.0, \"igst_amt\":0.0} %}\n\n\t{%- for row in doc.taxes -%}\n\t{% if 'CGST' in row.account_head -%}\n\t\t{% set _ = cgst_account_head.append(row.account_head) %}\n\t\t{% set _ = cgst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{% if 'SGST' in row.account_head -%}\n\t\t{% set _ = sgst_account_head.append(row.account_head) %}\n\t\t{% set _ = sgst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{% if 'IGST' in row.account_head -%}\n\t\t{% set _ = igst_account_head.append(row.account_head) %}\n\t\t{% set _ = igst_rate.append(row.rate) %}\n\t{%- endif -%}\n\t{%- endfor -%}\n\n\t{%- for row in doc.items -%}\n\t\t<tr width=\"100%\">\n\t\t        {% set cgst_amt = [] -%}\n\t\t \t {% set sgst_amt = [] -%}\n\t\t\t {% set igst_amt = [] -%}\n\t\t\t {% set it_cgst_rate = [] -%}\n\t\t \t {% set it_sgst_rate = [] -%}\n\t\t\t {% set it_igst_rate = [] -%}\n\t\t\t {% set rate_found_item = 0 -%}\n\n\t\t\t\t\t\t\t\t\n\t\t      {%- set item_record = frappe.get_doc(\"Item\", row.item_code) -%}\n\t\t\t{% for item_tax in item_record.taxes %}\n\n  \t\t\t  {% if item_tax.tax_type == igst_account_head[0] %}\n\t\t\t\t\n\t\t\t\t{% set _ = it_igst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = igst_amt.append(row.amount * it_igst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\t\n\t\t\t{% if item_tax.tax_type == sgst_account_head[0] %}\n\t\t\t\t\n\t\t\t\t{% set _ = it_sgst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = sgst_amt.append(row.amount * it_sgst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\n\t\t\t{% if item_tax.tax_type == cgst_account_head[0] %}\n\t\t\t\t{% set _ = it_cgst_rate.append(item_tax.tax_rate) %}\n\t\t\t\t{% set _ = cgst_amt.append(row.amount * it_cgst_rate[0] / 100) -%}\n\t\t\t\t{% set rate_found_item = 1 -%}\n\t\t\t{% endif %}\t\t\n\n\n\t\t{% endfor %}\t\n\t  \t{% if rate_found_item == 0 %}\n\n\t\t\t{% if cgst_rate[0] -%}\n\t\t\t   {% set _ = cgst_amt.append((row.amount * cgst_rate[0])/100) -%}\n\t\t\t   {% set _= it_cgst_rate.append(cgst_rate[0]) -%}\n\t\t\t   {% set rate_found_inv = 1 -%}\n\t\t       \t{%- endif -%}\n\t\t\t{% if sgst_rate[0] -%}\n\t\t\t   {% set _ = sgst_amt.append((row.amount * sgst_rate[0])/100) -%}\n\t\t\t   {% set _= it_sgst_rate.append(sgst_rate[0]) -%}\n\t\t\t   \n\t\t       \t{%- endif -%}\n\t\t\t{% if igst_rate[0] -%}\n\t\t\t   {% set _ = igst_amt.append((row.amount * igst_rate[0])/100) -%}\n\t\t\t   {% set _= it_igst_rate.append(igst_rate[0]) -%}\n\t\t\t   {% set rate_found_inv = 1 -%}\n\t\t       \t{%- endif -%}\n\t\t{% endif %}\n\t\n\t\n\t\t{% if not it_cgst_rate[0] %}\n\t\t\t{% set _ = it_cgst_rate.append(0) %}\n\t\t\t{% set _ = cgst_amt.append(0) %}\n\t\t{% endif %}\n\t\t{% if not it_sgst_rate[0] %}\n\t\t\t{% set _ = it_sgst_rate.append(0) %}\n\t\t\t{% set _ = sgst_amt.append(0) %}\n\t\t{% endif %}\n\t\t{% if not it_igst_rate[0] %}\n\t\t\t{% set _ = it_igst_rate.append(0) %}\n\t\t\t{% set _ = igst_amt.append(0) %}\n\t\t{% endif %}\n\n\t\t{% set temp_cgst_amt = grand_total[\"cgst_amt\"] + cgst_amt[0] %}\n\t\t{% set temp_sgst_amt = grand_total[\"sgst_amt\"] + sgst_amt[0] %}\n\t\t{% set temp_igst_amt = grand_total[\"igst_amt\"] + igst_amt[0] %}\n\t\t{% set temp_qty = grand_total[\"qty\"] + row.qty %}\n\t\t{% set temp_amount = grand_total[\"amount\"] + row.amount %}\n\t\t{% set check = grand_total.update({\"qty\": temp_qty, \"amount\": temp_amount, \"cgst_amt\":temp_cgst_amt, \"sgst_amt\":temp_sgst_amt, \"igst_amt\":temp_igst_amt}) %}\n\n\t\t{% if row.idx > 48 and row.idx < 57 -%}\n\t\t<td style=\"width: 3%;\"><font size = \"1\">{{ row.idx }}</font></td>\n\t\t<td style=\"width: 50%;\"><font size = \"1\"><b>Item Code : </b>{{ row.item_code }}&nbsp;&nbsp;<b>HSN Code : <b>{{ row.gst_hsn_code or '' }}<br><b>Item name : </b>{{ row.item_name }}</font></td>\n\t\t<td style=\"width: 7%; text-align: right;\"><font size = \"1\">{{ row.qty }} {{ row.uom or row.stock_uom }}</font></td>\n\t\t<td style=\"width: 10%; text-align: right;\"><font size = \"1\">{{row.get_formatted(\"price_list_rate\", doc) }}</font></td>\t\t\t\n\t\t<td style=\"width: 7%; text-align: right;\">{{ (it_cgst_rate[0] +it_sgst_rate[0]) or it_igst_rate[0]}}%</td>\n\t\t<td style=\"width: 9%; text-align: right;\"><font size = \"1\">{{ row.get_formatted(\"discount_percentage\", doc) }}</font></td>\n\t\t<td style=\"width: 14%; text-align: right;\"><font size = \"1\">{{row.get_formatted(\"amount\", doc) }}</font></td>\n</tr>\n\t{% endif %}\n   {% endfor %}\n</table>\n{% endif %}\n<table border=1 width=\"100%\">\n   {%- for row in doc.taxes -%}\n   {%- if not row.included_in_print_rate -%}\n  <tr width=\"100%\">\n      <th style=\"text-align:right; width: 80%;\">{{ row.description }}</th>\n      <th style=\"text-align:right; width: 20%;\">{{ row.get_formatted(\"tax_amount\", doc) }}</th>\n   </tr>\n   {%- endif -%}\n   {%- endfor -%}\n   <tr width=\"100%\">\n      <th style=\"text-align:right; width: 80%;\">Total GST + Shipping</th>\n      <th style=\"text-align:right; width: 20%;\">{{ doc.get_formatted('total_taxes_and_charges')}}</th>\n   </tr>\n    <tr width=\"100%\">\n      <th style=\"text-align:right;\">Round off</th>\n      <th style=\"text-align: right;\">{{ doc.get_formatted('rounding_adjustment')}}</th>\n   </tr>\n   <tr width=\"100%\">\n      <th style=\"text-align:right;\">Gross Total</th>\n      <th style=\"text-align: right;\">{{ doc.get_formatted('rounded_total')}}</th>\n   </tr>\n</table>\n<table border=1 width=\"100%\">\n<tr width=\"100%\">\n\t<td>{{ doc.other_charges_calculation or \"\" }}</td>\n</tr>\n</table>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n      \t\t<td>Grand Total (in Words): <strong>{{ doc.in_words}}</strong></td>\n   \t</tr>\n\t<tr width=\"100%\">\n      \t\t<td>Mode / Terms Of Payment : <strong>{{ doc.payment_terms_template or \"\" }}</strong></td>\n   \t</tr>\n</table>\n<table border=1 width=\"100%\">\n\t<tr width=\"100%\">\n     <td style=\"width: 65%;\">Terms and conditions:<br>1\tFreight Charges: At Actual Paid by Customer. Fright will be free for Order of Rs. 10000.00 or more in case of Delivery within Gujarat Order and for rest India order value is 20000.00 or more.<br>2) The risk loss or breakages in transits goods will be on buy.<br>3) Goods return policy: If goods in not satisfactory level than we will take back goods within 1 day prior notice and with Justification.</td>\n      <td style=\"width: 35%;text-align:right\">For {{ doc.company }} <br/> <br/> <br/> <br/><br/> <br/> <br/> <br/>Authorized Signatory</td>\n   </tr>\n</table>",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2020-06-08 11:22:44.150924",
 "modified_by": "Administrator",
 "module": "Schedule Master",
 "name": "Sales Invoice",
 "owner": "Administrator",
 "print_format_builder": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}